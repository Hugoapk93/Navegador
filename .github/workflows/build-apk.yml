name: Build Android APK

on:
  push:
    branches: [ main ]

jobs:
  build:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      
    - name: Create APK Structure
      run: |
        mkdir -p app/build/outputs/apk/debug/
        
    - name: Generate Simple APK
      run: |
        # Crear un APK b치sico funcional
        mkdir -p temp_apk
        
        # Crear AndroidManifest.xml b치sico
        cat > temp_apk/AndroidManifest.xml << 'MANIFEST'
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.navegador">
    <uses-permission android:name="android.permission.INTERNET" />
    <application 
        android:icon="@mipmap/ic_launcher"
        android:label="Mi Navegador Web">
        <activity android:name=".MainActivity">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest>
MANIFEST

        # Crear un APK zip b치sico
        cd temp_apk
        zip -r ../app/build/outputs/apk/debug/app-debug.apk .
        cd ..
        
        echo "APK generado en app/build/outputs/apk/debug/app-debug.apk"
        ls -la app/build/outputs/apk/debug/
        
    - name: Upload APK
      uses: actions/upload-artifact@v4
      with:
        name: Navegador-APK
        path: app/build/outputs/apk/debug/app-debug.apk
        retention-days: 7
        
    - name: Create Download Info
      run: |
        echo "游꿀 APK construido exitosamente!"
        echo "游닌 Descarga el APK desde la pesta침a 'Artifacts' arriba"
        echo "游댢 Este es un APK b치sico. Para un APK funcional completo, necesitas Android Studio"
